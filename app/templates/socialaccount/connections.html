{% extends "registration/base.html" %}
{% load static %}
{% load i18n %}

{% block head_title %}{% trans "Account Connections" %}{% endblock %}
{% block custom_css %}
<style>
    .borders{
        border: 1px solid black !important;
    }

</style>
{% endblock %}

{% block content %}

<div class="flex items-center justify-center min-h-screen bg-white">
    <div class="flex items-center justify-center">

        <form method="post" action="{% url 'socialaccount_connections' %}">
            {% csrf_token %}
            <fieldset>
                {% if form.non_field_errors %}
                <div class="error-msg">{{ form.non_field_errors }}</div>
                {% endif %}
                <div class="grid md:grid-cols-4 grid-col-6 gap-6 m-4">
                        <div class="relative flex flex-col items-center justify-center bg-gray-100 cursor-pointer m-3 social-container">
                        {% if facebook %}
                            <a href="{% url 'social_profile' facebook %}" class="no-underline hover:no-underline">
                        {% else %}
                            <a href="#" class="no-underline hover:no-underline">   
                        {% endif %}
                                <span class="provider-icon flex justify-center items-center border-none mr-2 rounded p-5 ">
                                     <img src="{% static '\assets\img\Social-Logos\facebook_logo.png'%}" style="width:90px;">
                                 </span>
                            </a>

                                <div class="bg-white w-full p-2 flex item-center justify-center mt-auto border-2 border-black sm:text-base text-sm">
                                {% if facebook %}
                                <div class="w-5/6 text-center break-all">
                                        <a href="{% url 'social_profile' facebook %}" class="no-underline hover:no-underline">
                                            <span>{{facebook.extra_data.name}}</span>
                                        </a>
                                    </div>
                                    <div class="w-1/6 flex items-center justify-center mb-0 cursor-pointer modal-button">

                                        <i class="fa-solid fa-trash-can sm:text-base text-sm"></i>

                                    </div>

                                

                                {%else %}
                                        {% include "socialaccount/snippets/provider_list.html" with process="connect" provider=facebook_app.name|lower %}
                                {% endif %}
                            </div>

                            <div class="main-modal fixed w-full h-100 inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn faster"
                                    style="background: rgba(0,0,0,.7);display: none;">
                                    <div
                                        class="border border-teal-500 shadow-lg modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
                                        <div class="modal-content py-4 text-left px-6">
                                            <!--Title-->
                                            <div class="flex justify-between items-center pb-3">
                                                <p class="text-2xl font-bold">Remove Account</p>
                                                <div class="modal-close cursor-pointer z-50">
                                                    <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                                        viewBox="0 0 18 18">
                                                        <path
                                                            d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z">
                                                        </path>
                                                    </svg>
                                                </div>
                                            </div>
                                            <!--Body-->
                                            <hr class="mt-5 bg-150 bg-gradient-to-tl from-gray-900 to-slate-800">
                                            <div class="py-4">
                                                <p>Are you sure you want to remove account?</p>
                                            </div>
                                            <hr class="mb-5  bg-150 bg-gradient-to-tl from-gray-900 to-slate-800">
                                            <!--Footer-->
                                            <div class="flex justify-end pt-2">
                                                <div 
                                                    class="focus:outline-none modal-close px-4 p-3 mb-2 borders border-solid rounded-lg shadow-none cursor-pointer border-black text-black">
                                                    <span>Cancel</span>
                                                    
                                                </div>


                                                <label for="id_account_{{ facebook.id }}" class="focus:outline-none px-4 bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline p-3 ml-3 rounded-lg text-white">
                                                    <input type="submit" name="account" id="id_account_{{ facebook.id }}"
                                                        value="{{ facebook.id }}" class="absolute h-0 w-0 appearance-none"/>

                                                        <span>Confirm</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                    </div>


                        </div>


                        <div class="relative flex flex-col items-center justify-center bg-gray-100 cursor-pointer m-3 social-container">
                            {% if instagram %}
                                <a href="{% url 'social_profile' instagram %}" class="no-underline hover:no-underline">
                            {% else %}
                                <a href="#" class="no-underline hover:no-underline">
                            {% endif %}
                                    <span class="provider-icon flex justify-center items-center border-none mr-2 rounded p-5">
                                        <img src="{% static 'assets/img/Social-Logos/instagram_logo.png' %}" style="width:90px;">
                                    </span>
                                 </a>
                           

                            <div class="bg-white w-full p-2 flex item-center justify-center mt-auto border-2 border-black sm:text-base text-sm">
                                {% if instagram %}
                                
                                    <div class="w-5/6 text-center break-all">
                                        <a href="{% url 'social_profile' instagram %}" class="no-underline hover:no-underline">

                                            <span>{{instagram.extra_data.username}}</span>
                                        </a>
                                    </div>

                                    <div class="w-1/6 flex items-center justify-center mb-0 cursor-pointer modal-button">

                                        <i class="fa-solid fa-trash-can sm:text-base text-sm"></i>

                                    </div>



                                {%else %}
                                        {% include "socialaccount/snippets/provider_list.html" with process="connect" provider=instagram_app.name|lower %}
                                {% endif %}
                            </div>


                            <div class="main-modal fixed w-full h-100 inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn faster"
                                    style="background: rgba(0,0,0,.7);display: none;">
                                <div
                                    class="border border-teal-500 shadow-lg modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
                                    <div class="modal-content py-4 text-left px-6">
                                        <!--Title-->
                                        <div class="flex justify-between items-center pb-3">
                                            <p class="text-2xl font-bold">Remove Account</p>
                                            <div class="modal-close cursor-pointer z-50">
                                                <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                                    viewBox="0 0 18 18">
                                                    <path
                                                        d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z">
                                                    </path>
                                                </svg>
                                            </div>
                                        </div>
                                        <!--Body-->
                                        <hr class="mt-5 bg-150 bg-gradient-to-tl from-gray-900 to-slate-800">
                                            <div class="py-4">
                                                <p>Are you sure you want to remove account?</p>
                                            </div>
                                        <hr class="mb-5  bg-150 bg-gradient-to-tl from-gray-900 to-slate-800">
                                        <!--Footer-->
                                        <div class="flex justify-end pt-2">
                                            <div 
                                                    class="focus:outline-none modal-close px-4 p-3 mb-2 borders border-solid rounded-lg shadow-none cursor-pointer border-black text-black">
                                                    <span>Cancel</span>

                                                </div>


                                            <label for="id_account_{{ instagram.id }}" class="focus:outline-none px-4 bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline p-3 ml-3 rounded-lg text-white">
                                                <input type="submit" name="account" id="id_account_{{ instagram.id }}"
                                                    value="{{ instagram.id }}" class="absolute h-0 w-0 appearance-none"/>

                                                    <span>Confirm</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class="relative flex flex-col items-center justify-center bg-gray-100 cursor-pointer m-3 social-container">
                            {% if linkedin_oauth2 %}
                            <a href="{% url 'social_profile' linkedin_oauth2 %}" class="no-underline hover:no-underline">
                            {% else %}
                            <a href="#"  class="no-underline hover:no-underline">
                            {% endif %}

                                <span class="provider-icon flex justify-center items-center border-none mr-2 rounded p-5">
                                     <img src="{% static '\assets\img\Social-Logos\linkedin_logo.png'%}" style="width:90px;"/>
                                 </span>
                            </a>

                                <div class="bg-white w-full p-2 flex item-center justify-center mt-auto border-2 border-black sm:text-base text-sm">
                                    {% if linkedin_oauth2 %}
                                        <div class="w-5/6 text-center break-all">
                                            <a href="{% url 'social_profile' linkedin_oauth2 %}" class="no-underline hover:no-underline">                                                
                                                <span>{{linkedin_oauth2.extra_data.firstName.localized.en_US}} {{linkedin_oauth2.extra_data.lastName.localized.en_US}}</span>
                                            </a>
                                        </div>

                                        <div class="w-1/6 flex items-center justify-center mb-0 cursor-pointer modal-button">

                                            <i class="fa-solid fa-trash-can sm:text-base text-sm"></i>

                                        </div>
                                    {%else %}
                                            {% include "socialaccount/snippets/provider_list.html" with process="connect" provider=linkedin_oauth2_app.name|lower %}
                                    {% endif %}
                                </div>



                                <div class="main-modal fixed w-full h-100 inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn faster"
                                    style="background: rgba(0,0,0,.7);display: none;">
                                    <div
                                        class="border border-teal-500 shadow-lg modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
                                        <div class="modal-content py-4 text-left px-6">
                                            <!--Title-->
                                            <div class="flex justify-between items-center pb-3">
                                                <p class="text-2xl font-bold">Remove Account</p>
                                                <div class="modal-close cursor-pointer z-50">
                                                    <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                                        viewBox="0 0 18 18">
                                                        <path
                                                            d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z">
                                                        </path>
                                                    </svg>
                                                </div>
                                            </div>
                                            <!--Body-->
                                            <hr class="mt-5 bg-150 bg-gradient-to-tl from-gray-900 to-slate-800">
                                            <div class="py-4">
                                                <p>Are you sure you want to remove account?</p>
                                            </div>
                                            <hr class="mb-5  bg-150 bg-gradient-to-tl from-gray-900 to-slate-800">
                                            <!--Footer-->
                                            <div class="flex justify-end pt-2">
                                                <div 
                                                    class="focus:outline-none modal-close px-4 p-3 mb-2 borders border-solid rounded-lg shadow-none cursor-pointer border-black text-black">
                                                    <span>Cancel</span>
                                                    
                                                </div>


                                                <label for="id_account_{{ linkedin_oauth2.id }}" class="focus:outline-none px-4 bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline p-3 ml-3 rounded-lg text-white">
                                                    <input type="submit" name="account" id="id_account_{{ linkedin_oauth2.id }}"
                                                        value="{{ linkedin_oauth2.id }}" class="absolute h-0 w-0 appearance-none"/>

                                                        <span>Confirm</span>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                        </div>


                        <div class="relative flex flex-col items-center justify-center bg-gray-100 cursor-pointer m-3 social-container">
                                {% if google %}    
                                <a href="{% url 'social_profile' google %}" class="no-underline hover:no-underline">
                                {% else %}
                                <a href="#" class="no-underline hover:no-underline">
                                {% endif %}
                                    <span class="provider-icon w-full flex justify-center items-center border-none mr-2 rounded p-5">
                                        <img src="{% static '\assets\img\Social-Logos\google_logo.png'%}" style="width:90px;">
                                    </span>
                                </a>

                                <div class="bg-white w-full p-2 flex item-center justify-center mt-auto border-2 border-black sm:text-base text-sm">
                                    {% if google %}

                                        <div class="w-5/6 text-center break-all">
                                            <a href="{% url 'social_profile' google %}" class="no-underline hover:no-underline">

                                                <span>{{google.extra_data.name}}</span>
                                            </a>
                                        </div>


                                        <div class="w-1/6 flex items-center justify-center mb-0 cursor-pointer modal-button">

                                            <i class="fa-solid fa-trash-can sm:text-base text-sm"></i>

                                        </div>



                                    {%else %}
                                            {% include "socialaccount/snippets/provider_list.html" with process="connect" provider=google_app.name|lower %}
                                    {% endif %}
                                </div>



                            <div class="main-modal fixed w-full h-100 inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn faster"
                                style="background: rgba(0,0,0,.7);display: none;">
                                <div
                                    class="border border-teal-500 shadow-lg modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto">
                                    <div class="modal-content py-4 text-left px-6">
                                        <!--Title-->
                                        <div class="flex justify-between items-center pb-3">
                                            <p class="text-2xl font-bold">Remove Account</p>
                                            <div class="modal-close cursor-pointer z-50">
                                                <svg class="fill-current text-black" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                                                    viewBox="0 0 18 18">
                                                    <path
                                                        d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z">
                                                    </path>
                                                </svg>
                                            </div>
                                        </div>
                                        <!--Body-->
                                        <hr class="mt-5 bg-150 bg-gradient-to-tl from-gray-900 to-slate-800">
                                            <div class="py-4">
                                                <p>Are you sure you want to remove account?</p>
                                            </div>
                                        <hr class="mb-5  bg-150 bg-gradient-to-tl from-gray-900 to-slate-800">
                                        <!--Footer-->
                                        <div class="flex justify-end pt-2">
                                            <div 
                                                    class="focus:outline-none modal-close px-4 p-3 mb-2 borders border-solid rounded-lg shadow-none cursor-pointer border-black text-black">
                                                    <span>Cancel</span>

                                                </div>


                                            <label for="id_account_{{ google.id }}" class="focus:outline-none px-4 bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline p-3 ml-3 rounded-lg text-white">
                                                <input type="submit" name="account" id="id_account_{{ google.id }}"
                                                    value="{{ google.id }}" class="absolute h-0 w-0 appearance-none"/>

                                                    <span>Confirm</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
            </fieldset>
        </form>
    </div>



</div>



</div>




<script>

const modalClose = (modal) => {
    modal.classList.remove('fadeIn');
    modal.classList.add('fadeOut');
    
    modal.style.display = 'none';
    
}

const openModal = (modal) => {
    modal.classList.remove('fadeOut');
    modal.classList.add('fadeIn');
    modal.style.display = 'flex';
}


const socialcontainers = document.querySelectorAll('.social-container');

if (socialcontainers.length > 0){

        socialcontainers.forEach((div)=> {

    const modalbutton = div.querySelector('.modal-button');
    const modal = div.querySelector('.main-modal');
        const closeButton = div.querySelectorAll('.modal-close');

        modalbutton.onclick = (e) => openModal(modal);
        

        for (let i = 0; i < closeButton.length; i++) {

            const elements = closeButton[i];

            elements.onclick = (e) => modalClose(modal);

            modal.style.display = 'none';

            window.onclick = function (event) {
                if (event.target == modal) modalClose(modal);
            }
        }

    console.log(div)
    });


}





</script>
{% endblock %}