<!DOCTYPE html>
{%load static%}

<html>
<head>
    {% block custom_css %}



    {% endblock %}


    <title>{% block title %}{% endblock %}</title>
    <link type="text/css" rel="stylesheet" href="{% static 'css/style.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'assets/css/nucleo-icons.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'assets/css/nucleo-svg.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'assets/css/perfect-scrollbar.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'assets/css/soft-ui-dashboard-tailwind.css' %}"/>
      <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
    <script type="text/javascript"  src="https://kit.fontawesome.com/c4dfba4734.js" crossorigin="anonymous"></script>
      <link href="{% static 'lib/css/emoji.css'%}" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script type="text/javascript"  src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script type="text/javascript"  src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"defer></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <script type="text/javascript"  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <script type="text/javascript"  src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script><style media="all" id="fa-v4-font-face">/*!
    <style>
    .close{
        width: 7rem !important;
    }

    .close li{
        justify-content: center;
    }

    .close .nav__item{
        display: none;
    }
    .cross{
        display:none !important;
    }
    </style>

</head>
<body class="m-0 font-sans text-base antialiased font-normal leading-default bg-gray-50 text-slate-500 h-screen">

{%block bar%}

{%endblock%}

     <nav class="relative flex flex-wrap items-center justify-between px-0 py-2 mx-6 transition-all shadow-none duration-250 ease-soft-in rounded-2xl lg:flex-nowrap lg:justify-start">
        <div class="flex items-center justify-between w-full px-4 py-1 mx-auto flex-wrap-inherit">
            <div class="h-12 text-center">
                {% if user.is_authenticated %}
                <a href="{% url 'dashboard' %}" class="block px-2 py-2 m-0 text-lg whitespace-nowrap text-center text-slate-700 hover:no-underline hover:text-slate-700">
                    <span class="ml-1 font-semibold transition-all duration-200 ease-nav-brand">SMART PRESENCE</span>
                </a>
                {% else %}
                <a href="{% url 'home' %}" class="block px-2 py-2 m-0 text-lg whitespace-nowrap text-center text-slate-700 hover:no-underline hover:text-slate-700">
                    <span class="ml-1 font-semibold transition-all duration-200 ease-nav-brand">SMART PRESENCE</span>
                </a>
                {% endif %}
            </div>
            {% if user.is_authenticated %}
                <li class="relative list-none ml-auto">
                   <div class="flex" >
                       <div class="transition-all duration-200 ease-soft-in-out h-10 w-10 rounded-xl overflow-hidden mr-2">
                           {% if user.profile_image %}
                            <img src="{{ user.profile_image.url }}" class="w-full h-full object-cover" alt="user1" >
                            {% else %}
                            <img src="{% static 'image/default.png' %}" class="w-full h-full object-cover" alt="user1">
                            {% endif %}
                        </div>
                        <a class="cursor-pointer hover:no-underline hover:border-2 hover:border-black hover:text-black" id="profile_dropdown_button">
                            <div class="flex items-center justify-between">
                                <p class="text-sm text-black font-semibold">{{user.username}}</p>
                                <i class="fa-solid fa-chevron-down mr-3"></i>
                            </div>
                            <p class="text-xs">{{user.email}}</p>
                        </a>


                    <ul class="hidden text-sm before:font-awesome before:leading-default before:duration-350 before:ease-soft lg:shadow-soft-3xl duration-250 min-w-44 before:sm:right-7.5 before:text-5.5  origin-top list-none absolute right-0 top-0 z-50 origin-top list-none rounded-lg border-0 border-solid border-transparent bg-white bg-clip-padding px-2 py-2 text-left text-slate-500 transition-all before:absolute before:right-0 before:left-auto before:top-0 before:z-50 before:inline-block before:font-normal before:text-white before:antialiased before:transition-all before:content-['\f0d8'] sm:-mr-6 lg:absolute lg:right-3 lg:left-auto lg:mt-2 lg:block lg:cursor-pointer before:-top-5 transform-dropdown-show" id="profile_dropdown" style="display:none;">
                        <li class="relative hover:bg-gray-100 rounded-lg duration-300 lg:transition-colors">
                            <a href = "{% url 'edit_user' %}" class="ease-soft py-1.2 clear-both block w-full whitespace-nowrap rounded-lg bg-transparent px-4 duration-300 hover:text-slate-700 lg:transition-colors hover:no-underline" href="javascript:;">
                              <div class="flex items-center">
                                  <i class="fa-solid fa-user-pen mr-2"></i>
                                    <p>Edit Profile</p>
                              </div>
                            </a>
                         </li>

                        <li class="relative hover:bg-gray-100 rounded-lg duration-300 lg:transition-colors">
                            <a href = "{% url 'logout' %}"
                                    class="ease-soft py-1.2 clear-both block w-full whitespace-nowrap rounded-lg bg-transparent px-4 duration-300 hover:text-slate-700 lg:transition-colors hover:no-underline" href="javascript:;">
                              <div class="flex items-center">
                                 <i class="fa-solid fa-right-from-bracket mr-2"></i>
                                    <p>Logout</p>
                              </div>
                            </a>
                         </li>
                    </ul>
                   </div>
               </li>
            {% else %}
            <div class="ml-auto flex">
                <li class="list-none">
                    <a class="nav-link" href="{% url 'login' %}">Login</a>
                </li>
                <li class="list-none">
                    <a class="nav-link" href="{% url 'register' %}">SignUp</a>
                </li>
            </div>
            {% endif %}

        </div>

    </nav>
<div class="w-full flex h-full">
    {% if user.is_authenticated %}

    <aside class="w-52 relative screen ease-nav-brand inset-y-10 ml-4 flex-wrap items-center justify-between overflow-y-auto rounded-xl border-0 bg-gray-100 p-0 antialiased shadow-none transition-transform duration-200 flex-wrap left-0 translate-x-0 top-0 " id="sidebar">
          <div class="w-full flex items-center justify-center">
            <ul class="space-y-2 m-2 w-full">


                <li class="p-1 block hover:bg-gray-500 hover:bg-opacity-10 text-gray-700 cursor-pointer rounded my-3">
                    <a href="{% url 'my_profile' %}"
                    class="  flex items-center py-2 px-4 rounded space-x-2 hover:no-underline hover:text-black">
                    <div class="w-5">

                        <svg viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 28.4253V28.8H26.8143V28.4253C26.8143 21.3442 22.2434 17.4477 13.9259 17.4477C5.60835 17.4477 1 21.3442 1 28.4253ZM13.8884 18.197C19.3585 18.197 25.8401 19.9205 26.0275 28.0506H1.74933C1.93666 19.9205 8.41832 18.197 13.8884 18.197Z" fill="#00111C" stroke="black" stroke-width="0.5"/>
                                <path d="M20.2571 7.51913C20.2571 3.80997 17.522 1 13.8878 1C10.2536 1 7.51855 3.80997 7.51855 7.51913C7.51855 11.3782 10.366 14.4879 13.8878 14.4879C17.4096 14.4879 20.2571 11.3782 20.2571 7.51913ZM8.26788 7.51913C8.26788 4.18463 10.6283 1.74933 13.8878 1.74933C17.1474 1.74933 19.5078 4.18463 19.5078 7.51913C19.5078 10.966 16.9975 13.7385 13.8878 13.7385C10.7781 13.7385 8.26788 10.966 8.26788 7.51913Z" fill="#00111C" stroke="black" stroke-width="0.5"/>
                            </svg>
                    </div>
                        <span class="text-sm">My Profile</span>
                    </a>
                    <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent"/>
                </li>

                <li class="p-1 block hover:bg-gray-500 hover:bg-opacity-10 text-gray-700 cursor-pointer rounded my-3">
                    <a href="{% url 'dashboard' %}"
                    class="flex items-center py-2 px-4 space-x-2 hover:no-underline hover:text-black">
                    <div class="w-5">
                        <svg viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M0.552278 25C0.479771 25 0.407969 24.9854 0.340973 24.957C0.273977 24.9286 0.213098 24.8869 0.161813 24.8344C0.110529 24.7819 0.0698429 24.7196 0.0420788 24.6509C0.0143147 24.5823 1.63047e-05 24.5087 0 24.4345L0 0.565577C1.44925e-05 0.491285 0.0143116 0.417717 0.0420749 0.349089C0.0698382 0.28046 0.110524 0.218121 0.161809 0.165604C0.213093 0.113087 0.273973 0.0714245 0.34097 0.0430164C0.407967 0.0146065 0.47977 -2.47955e-05 0.552278 1.90735e-06L23.8484 1.90735e-06C23.9948 3.62396e-05 24.1352 0.0596523 24.2387 0.165707C24.3422 0.271763 24.4003 0.415594 24.4004 0.565577L24.4004 24.4345C24.4003 24.5844 24.3422 24.7283 24.2387 24.8343C24.1352 24.9404 23.9948 25 23.8484 25L0.552278 25ZM1.10424 23.8689H11.6537L11.6537 16.5307H1.10424L1.10424 23.8689ZM12.7577 23.8689L23.2961 23.8689L23.2961 8.30871L12.7577 8.30871L12.7577 23.8689ZM1.10424 15.3996L11.6537 15.3996L11.6537 1.13112H1.10424L1.10424 15.3996ZM12.7577 7.17732L23.2961 7.17732V1.13112L12.7577 1.13112L12.7577 7.17732Z" fill="black"/>
                        </svg>
                    </div>


                        <span class="text-sm">Dashboard</span>
                    </a>
                    <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent"/>
                </li>

                <li class="p-1 block hover:bg-gray-500 hover:bg-opacity-10 text-gray-700 cursor-pointer rounded my-3">
                    <a href="{% url 'my_posts' user.pk  %}"
                    class="flex items-center py-2 px-4 space-x-2 text-black hover:no-underline hover:text-black">


                        <div class="w-5">
                            <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 40.000000 33.000000"
                            preserveAspectRatio="xMidYMid meet">

                            <g transform="translate(0.000000,33.000000) scale(0.100000,-0.100000)"
                            fill="#000000" stroke="none">
                            <path d="M16 314 c-23 -23 -23 -275 0 -298 13 -13 44 -16 183 -16 116 0 171 4
                            179 12 17 17 17 289 0 306 -8 8 -63 12 -179 12 -139 0 -170 -3 -183 -16z m345
                            -4 c17 -10 19 -22 19 -128 l0 -117 -36 38 c-42 44 -71 47 -104 12 l-24 -25
                            -36 35 c-20 19 -45 35 -57 35 -12 0 -41 -20 -67 -47 l-46 -48 0 112 c0 88 3
                            115 16 127 13 13 42 16 165 16 85 0 159 -5 170 -10z m-171 -217 c36 -40 49
                            -51 45 -35 -5 17 -1 30 16 48 12 13 28 24 34 24 6 0 31 -21 55 -46 43 -44 44
                            -46 26 -60 -15 -11 -55 -14 -167 -14 -158 0 -179 3 -179 28 0 19 88 112 106
                            112 7 0 36 -26 64 -57z"/>
                            <path d="M239 259 c-17 -33 3 -69 39 -69 33 0 52 16 52 45 0 29 -19 45 -52 45
                            -18 0 -31 -7 -39 -21z m70 -8 c7 -13 6 -23 -3 -36 -17 -24 -50 -15 -54 14 -6
                            39 39 56 57 22z"/>
                            </g>
                            </svg>

                        </div>
                        <span class="text-sm">Posts</span>
                    </a>
                    <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent"/>
                </li>
                <li class="p-1 block hover:bg-gray-500 hover:bg-opacity-10 text-gray-700 cursor-pointer rounded my-3">
                    <a href="{% url 'socialaccount_connections' %}"
                    class="flex items-center text-black py-2 px-4 space-x-2 hover:no-underline hover:text-black">

                        <div class="w-5">

                            <svg viewBox="0 0 25 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M24.5589 3.01276H18.9643V0.43801C18.9643 0.196429 18.7663 0 18.5263 0H6.4676C6.22551 0 6.02959 0.196684 6.02959 0.43801V3.0125H0.43801C0.194898 3.0125 0 3.20918 0 3.45051V9.48265V21.5452C0 21.7862 0.198214 21.9811 0.43801 21.9811H24.562C24.8018 21.9811 25 21.7849 25 21.5452V9.48265V3.44974C24.9967 3.20918 24.7977 3.01276 24.5589 3.01276ZM6.9023 0.87551H18.087V3.0125H6.9023V0.87551ZM0.872959 3.88878H24.1209V9.04362H14.3941C14.3793 8.97857 14.3398 8.92628 14.3202 8.86327C14.2908 8.77449 14.2543 8.69286 14.2148 8.6102C14.148 8.47781 14.0645 8.3625 13.9707 8.25051C13.9143 8.18214 13.8589 8.11479 13.7974 8.05485C13.6806 7.94796 13.5452 7.86811 13.4094 7.79311C13.3416 7.75459 13.2801 7.70867 13.2082 7.67985C12.987 7.59235 12.7503 7.53699 12.499 7.53699C12.2464 7.53699 12.0087 7.59235 11.7898 7.67985C11.7168 7.70867 11.6584 7.75485 11.5906 7.79107C11.4508 7.86556 11.3173 7.94796 11.1995 8.0551C11.1337 8.11505 11.0847 8.18138 11.0286 8.25076C10.9347 8.36173 10.8513 8.47806 10.7834 8.61046C10.7416 8.69286 10.7074 8.77372 10.677 8.86352C10.6541 8.92755 10.6166 8.98036 10.602 9.04439H0.87602V3.88878H0.872959ZM11.4237 9.48265C11.4237 8.89235 11.9046 8.41148 12.4959 8.41148C13.0862 8.41148 13.5702 8.89235 13.5702 9.48265V12.4985C13.5702 13.0867 13.0865 13.5686 12.4959 13.5686C11.9056 13.5686 11.4237 13.0865 11.4237 12.4985V9.48265ZM24.1209 21.1071H0.872959V9.91964H10.5497V12.4982C10.5497 13.5704 11.4217 14.4423 12.4959 14.4423C13.5702 14.4423 14.4434 13.5704 14.4434 12.4982V9.91964H24.1212L24.1209 21.1071Z" fill="black"/>
                            </svg>
                        </div>


                        <span class="text-sm">Business Profile</span>
                    </a>
                    <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent"/>
                </li>
                {% if user_role == 'ADMIN' %}
                <li class="p-1 block hover:bg-gray-500 hover:bg-opacity-10 text-gray-700 cursor-pointer rounded my-3">
                    <a href="{% url 'my_user' %}"
                    class="flex items-center py-2 px-4 space-x-2 hover:no-underline hover:text-black">

                        <div class="w-4 mr-2">
                           <svg  width="30" height="27" enable-background="new 0 0 50 50"  id="Layer_1" version="1.1" viewBox="0 0 50 50"  xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                               <circle cx="25" cy="25" fill="none" r="24" stroke="#000000" stroke-linecap="round" stroke-miterlimit="10" stroke-width="1"/>
                               <rect fill="none" height="50" width="50"/>
                               <path d="M29.933,35.528  c-0.146-1.612-0.09-2.737-0.09-4.21c0.73-0.383,2.038-2.825,2.259-4.888c0.574-0.047,1.479-0.607,1.744-2.818  c0.143-1.187-0.425-1.855-0.771-2.065c0.934-2.809,2.874-11.499-3.588-12.397c-0.665-1.168-2.368-1.759-4.581-1.759  c-8.854,0.163-9.922,6.686-7.981,14.156c-0.345,0.21-0.913,0.878-0.771,2.065c0.266,2.211,1.17,2.771,1.744,2.818  c0.22,2.062,1.58,4.505,2.312,4.888c0,1.473,0.055,2.598-0.091,4.21c-1.261,3.39-7.737,3.655-11.473,6.924  c3.906,3.933,10.236,6.746,16.916,6.746s14.532-5.274,15.839-6.713C37.688,39.186,31.197,38.93,29.933,35.528z" fill="none" stroke="#000000" stroke-linecap="round" stroke-miterlimit="10" stroke-width="1"/>
                           </svg>


                        </div>
                        <span class="text-sm">Users</span>
                    </a>
                    <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent"/>
                </li>
                {% endif %}

            </ul>

          </div>

    </aside>
    <footer class="fixed bottom-0 w-full bg-white p-4 hidden">
        <ul>
            <li class="p-1 block  text-gray-700 cursor-pointer rounded my-3">
                <a href="{% url 'privacy_policy' %}"
                   class="flex items-center py-2 px-4 space-x-2 hover:no-underline hover:text-black">
                    <div class="w-6 h-6 flex items-center justify-center ">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-6 h-6">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
                        </svg>
                    </div>
                    <span class="text-sm">Privacy Policy</span>
                </a>
                <hr class="h-px mt-0 bg-transparent bg-gradient-to-r from-transparent via-black/40 to-transparent"/>
            </li>
        </ul>
    </footer>

    {%endif%}

    <main class="flex-1 relative">
       {% if user.is_authenticated %}
        {% block content %}
        <!-- Main content goes here -->
            {%endblock%}

        {% else %}
        {% block main%}
            {% endblock %}

        {% endif %}



    </main>
</div>




</body>

<script>
  const profileDropdownbutton = document.getElementById('profile_dropdown_button');
   const profileDropdown = document.getElementById('profile_dropdown');
   profileDropdownbutton.addEventListener('click', () => {
    if(profileDropdown.style.display == 'block'){
        profileDropdown.style.display = 'none';
       }else{
        profileDropdown.style.display = 'block';
       }
});



function closeModal(dialog){
    dialog.classList.remove('flex');
    dialog.classList.add('hidden');
}


function getFormattedDate(daysBefore = 0){
    let currentDate = new Date();
    const oneDay = daysBefore * 24 * 60 * 60 * 1000; // One day in milliseconds
    currentDate = new Date(currentDate - oneDay);
    const year = currentDate.getFullYear();
    const month = (currentDate.getMonth() + 1).toString().padStart(2, '0'); // Adding 1 to month because months are zero-indexed
    const day = currentDate.getDate().toString().padStart(2, '0');

    const formattedDate = `${year}-${month}-${day}`;
    return formattedDate;

}
</script>
<!-- plugin for scrollbar  -->
<script type="text/javascript"  src="{% static 'assets/js/plugins/perfect-scrollbar.min.js' %}"></script>
<!-- github button -->
<script type="text/javascript"  defer src="https://buttons.github.io/buttons.js"></script>
<script type="text/javascript"  src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.1/flowbite.min.js"></script>
<script type="text/javascript"  src="https://unpkg.com/@popperjs/core@2"></script>
<!-- main script file  -->
<script type="text/javascript"  src="{% static 'assets/js/soft-ui-dashboard-tailwind.js' %}"></script>
<script type="text/javascript"  src="{% static 'assets/js/dropdown.js' %}" ></script>
<script type="text/javascript"  src="{% static 'assets/js/perfect-scrollbar.js' %}"></script>
<script type="text/javascript" src="{% static 'assets/js/htmx.min.js' %}"></script>
<script type="text/javascript"  src="{% static 'assets/js/tooltips.js' %}" ></script>
<!--<script src="https://cdn.jsdelivr.net/npm/tw-elements@1.0.0/dist/tw-elements.min.js"></script>-->
<!-- must be include as static files -->
<script type="text/javascript"  src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
</html>
