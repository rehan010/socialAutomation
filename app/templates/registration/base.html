<!DOCTYPE html>
{%load static%}

<html>
<head>

    {% block custom_css %}
    {% endblock %}


    <title>{% block title %}{% endblock %}</title>
    <link type="text/css" rel="stylesheet" href="{% static 'css/style.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'assets/css/nucleo-icons.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'assets/css/nucleo-svg.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'assets/css/perfect-scrollbar.css' %}"/>
    <link type="text/css" rel="stylesheet" href="{% static 'assets/css/soft-ui-dashboard-tailwind.css' %}"/>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">


</head>
<body class="bg-gray-100">


<header class="navbar navbar-expand-lg navbar-light bg-light">

    {% if user.is_authenticated %}
    <button class="text-white px-4 py-2  top-2 left-2" id="toggleButton"><span class="navbar-toggler-icon"></span>
    </button>
    {%endif%}

    {% if user.is_authenticated %}
    <a href="{% url 'dashboard' %}"><h1 class="navbar-brand ">SMART PRESENCE</h1></a>
    {%else%}
    <a href="{% url 'base' %}"><h1 class="navbar-brand ">SMART PRESENCE</h1></a>
    {%endif%}
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">

            {% if user.is_authenticated %}
            {% else %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'login' %}">Login</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="{% url 'register' %}">SignUp</a>
            </li>
            {% endif %}


        </ul>
    </div>
</header>

{%block bar%}

{%endblock%}
<div class="flex flex-col md:flex-row">
    <!-- Sidebar -->
    {% if user.is_authenticated %}

    <aside class="bg-gray-200 w-1/6 " id="sidebar">
        <div class="flex h-screen">

            <div class="px-2 pt-4 pb-8 border-r ">
                <ul class="space-y-2">

                    <li>
                        <a href="{% url 'my_profile' %}"
                           class="hover:bg-gray-500 hover:bg-opacity-10 hover:text-blue-600 flex items-center text-gray-700 py-1.5 px-4 rounded space-x-2 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512">
                                <!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/>
                            </svg>
                            <span>My Profile</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'dashboard' %}"
                           class="hover:bg-gray-500 hover:bg-opacity-10 hover:text-blue-600 flex items-center text-gray-700 py-1.5 px-4 rounded space-x-2 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512">
                                <!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/>
                            </svg>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'socialaccount_connections' %}"
                           class="hover:bg-gray-500 hover:bg-opacity-10 hover:text-blue-600 flex items-center text-gray-700 py-1.5 px-4 rounded space-x-2 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 576 512">
                                <!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path d="M352 224H305.5c-45 0-81.5 36.5-81.5 81.5c0 22.3 10.3 34.3 19.2 40.5c6.8 4.7 12.8 12 12.8 20.3c0 9.8-8 17.8-17.8 17.8h-2.5c-2.4 0-4.8-.4-7.1-1.4C210.8 374.8 128 333.4 128 240c0-79.5 64.5-144 144-144h80V34.7C352 15.5 367.5 0 386.7 0c8.6 0 16.8 3.2 23.2 8.9L548.1 133.3c7.6 6.8 11.9 16.5 11.9 26.7s-4.3 19.9-11.9 26.7l-139 125.1c-5.9 5.3-13.5 8.2-21.4 8.2H384c-17.7 0-32-14.3-32-32V224zM80 96c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16H400c8.8 0 16-7.2 16-16V384c0-17.7 14.3-32 32-32s32 14.3 32 32v48c0 44.2-35.8 80-80 80H80c-44.2 0-80-35.8-80-80V112C0 67.8 35.8 32 80 32h48c17.7 0 32 14.3 32 32s-14.3 32-32 32H80z"/>
                            </svg>
                            <span>Business Profile</span>
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'my_posts' user.pk %}"
                           class="hover:bg-gray-500 hover:bg-opacity-10 hover:text-blue-600 flex items-center text-gray-700 py-1.5 px-4 rounded space-x-2 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
                                <!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path d="M224 32H64C46.3 32 32 46.3 32 64v64c0 17.7 14.3 32 32 32H441.4c4.2 0 8.3-1.7 11.3-4.7l48-48c6.2-6.2 6.2-16.4 0-22.6l-48-48c-3-3-7.1-4.7-11.3-4.7H288c0-17.7-14.3-32-32-32s-32 14.3-32 32zM480 256c0-17.7-14.3-32-32-32H288V192H224v32H70.6c-4.2 0-8.3 1.7-11.3 4.7l-48 48c-6.2 6.2-6.2 16.4 0 22.6l48 48c3 3 7.1 4.7 11.3 4.7H448c17.7 0 32-14.3 32-32V256zM288 480V384H224v96c0 17.7 14.3 32 32 32s32-14.3 32-32z"/>
                            </svg>
                            <span>Posts</span>
                        </a>
                    </li>
<!--                    <li>-->
<!--                        <a href="{% url 'password_change' %}"-->
<!--                           class="hover:bg-gray-500 hover:bg-opacity-10 hover:text-blue-600 flex items-center text-gray-700 py-1.5 px-4 rounded space-x-2 cursor-pointer">-->
<!--                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">-->
<!--                                &lt;!&ndash;! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. &ndash;&gt;-->
<!--                                <path d="M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17v80c0 13.3 10.7 24 24 24h80c13.3 0 24-10.7 24-24V448h40c13.3 0 24-10.7 24-24V384h40c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"/>-->
<!--                            </svg>-->
<!--                            <span>Change password</span>-->
<!--                        </a>-->
<!--                    </li>-->
<!--                    <li>-->
<!--                        <a href="{% url 'upload_file' %}"-->
<!--                           class="hover:bg-gray-500 hover:bg-opacity-10 hover:text-blue-600 flex items-center text-gray-700 py-1.5 px-4 rounded space-x-2 cursor-pointer">-->
<!--                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 384 512">-->
<!--                                &lt;!&ndash;! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. &ndash;&gt;-->
<!--                                <path d="M64 0C28.7 0 0 28.7 0 64V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V160H256c-17.7 0-32-14.3-32-32V0H64zM256 0V128H384L256 0zM216 408c0 13.3-10.7 24-24 24s-24-10.7-24-24V305.9l-31 31c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l72-72c9.4-9.4 24.6-9.4 33.9 0l72 72c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-31-31V408z"/>-->
<!--                            </svg>-->
<!--                            <span>Upload Branch</span>-->
<!--                        </a>-->

<!--                    </li>-->
                    <li>
                        <a href="{% url 'logout' %}"
                           class="hover:bg-gray-500 hover:bg-opacity-10 hover:text-blue-600 flex items-center text-gray-700 py-1.5 px-4 rounded space-x-2 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512">
                                <!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. -->
                                <path d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"/>
                            </svg>
                            <span>Logout</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

    </aside>
    {%endif%}
    <!-- Main Content -->
    <main class="flex-1">

        {% block content %}
        <!-- Main content goes here -->
        {%endblock%}
    </main>
</div>

<!--  <fb:login-button-->
<!--  scope="public_profile,email"-->
<!--  onlogin="checkLoginState();">-->
<!--</fb:login-button>-->
</div>
<br>
<br>
<br>
<br>

<footer>
    &copy; 2023 Smart Presence . All rights reserved.
</footer>

</body>
<script>
    const toggleButton = document.getElementById('toggleButton');
const sidebar = document.getElementById('sidebar');

toggleButton.addEventListener('click', () => {
  sidebar.classList.toggle('hidden');
});



</script>
<script>
      const data = JSON.parse(document.getElementById('point_files').textContent);
      console.log(data);
      for (var i = 0; i < data.length; i++) {
      var pointFile = data[i];
      console.log(pointFile);
      console.log("Point File ID: " + pointFile.id);
      var map = L.map("map_"+pointFile.id.toString()).setView([pointFile.lat_long[0].latitude, pointFile.lat_long[0].longitude], 5);

        // Add the tile layer (you can use a different tile provider)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

          var latLongList = pointFile.lat_long;
          console.log(latLongList);
          for (var j = 0; j < latLongList.length; j++) {
            var latLong = latLongList[j];
            var marker = L.marker([latLong.latitude,latLong.longitude]);
            marker.bindPopup("Latitude: " + latLong.latitude + "<br>Longitude: " + latLong.longitude);

            // Add the marker to the map
            marker.addTo(map);


            console.log("Latitude: " + latLong.latitude);
            console.log("Longitude: " + latLong.longitude);
          }
    };


<!--window.fbAsyncInit = function() {-->
<!--  FB.init({-->
<!--    appId: '283757437433759',-->
<!--    cookie: true,-->
<!--    xfbml: true,-->
<!--    version: 'v17.0'-->
<!--  });-->

<!--  FB.AppEvents.logPageView();-->

<!--  FB.getLoginStatus(function(response) {-->
<!--    statusChangeCallback(response);-->
<!--  });-->

<!--  function statusChangeCallback(response) {-->
<!--    if (response.status === 'connected') {-->
<!--      // User is logged in and has authorized your app-->
<!--      var accessToken = response.authResponse.accessToken;-->
<!--      console.log('Access Token:', accessToken);-->
<!--      localStorage.setItem('accessToken', accessToken);-->
<!--    } else if (response.status === 'not_authorized') {-->
<!--      // User is logged in to Facebook, but has not authorized your app-->

<!--      console.log('User has not authorized the app.');-->
<!--    } else {-->
<!--      // User is not logged in to Facebook-->
<!--      FB.login(function(response2){-->
<!--        console.log(response2);-->
<!--         // handle the response-->
<!--        });-->
<!--      console.log('User is not logged in to Facebook.');-->
<!--    }-->
<!--  }-->

<!--  function checkLoginState() {-->
<!--    FB.getLoginStatus(function(response) {-->
<!--      statusChangeCallback(response);-->
<!--    });-->
<!--  }-->
<!--};-->

<!--(function(d, s, id) {-->
<!--  var js, fjs = d.getElementsByTagName(s)[0];-->
<!--  if (d.getElementById(id)) { return; }-->
<!--  js = d.createElement(s); js.id = id;-->
<!--  js.src = "https://connect.facebook.net/en_US/sdk.js";-->
<!--  fjs.parentNode.insertBefore(js, fjs);-->
<!--}(document, 'script', 'facebook-jssdk'));-->





</script>

</html>
