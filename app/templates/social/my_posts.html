{%extends 'registration/base.html'%}
{%load static%}
{%load humanize %}
{%block bar%}
{%endblock%}

{% block custom_css %}
<style>
    .container{
    font-family:Open sans;!important
}



</style>

{% endblock %}


{% block content %}


<div class="container mx-auto">
    <div class="tabs relative flex flex-col min-w-0 mb-6 break-words bg-white border-0 border-transparent border-solid shadow-soft-xl rounded-2xl bg-clip-border">
        <br>
        <hr>
        <br>
        <div class="flex items-center justify-center relative">
            <ul class="col-span-3 flex grid grid-flow-col justify-center space-x-4">
                <li>
                    <a href="" data-tab="tab1" data-platform="fb"
                       class="text-gray-500 hover:text-gray-700 font-medium bg-gray-100 hover:bg-gray-200 rounded-full px-4 py-2 bg-blue-100 shadow text-indigo-900"
                       onclick="updatePlatform(event,'fb')">Facebook</a>
                </li>
                <li>
                    <a href="" data-tab="tab2" data-platform="ln"
                       class="text-gray-500 hover:text-gray-700 font-medium bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full"
                       onclick="updatePlatform(event,'ln')">Linkedin</a>
                </li>
                <li>
                    <a href="" data-tab="tab3" data-platform="insta"
                       class="text-gray-500 hover:text-gray-700 font-medium bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full"
                       onclick="updatePlatform(event,'insta')">Instagram</a>
                </li>
                <li>
                    <a href="" data-tab="tab4" data-platform="google"
                       class="text-gray-500 hover:text-gray-700 font-medium bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full"
                       onclick="updatePlatform(event,'google')">Google</a>
                </li>
            </ul>
            <div class="absolute right-0 flex justify-end pl-auto mr-3">
                <a class="px-3 py-2 text-xs font-bold text-center text-white uppercase align-middle transition-all bg-transparent rounded-lg cursor-pointer leading-pro  ease-soft-in shadow-soft-md bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline"
                   href="{% url 'create_post' %}">
                    <i class="fas fa-plus" aria-hidden="true"></i>
                    &nbsp;&nbsp;Create Post
                </a>
            </div>

        </div>


        <br>
        <hr>
        <br>

        <div class="tab-content">
            <div id="tab1" class="tab">
                <div class="flex-auto p-6 px-0 pb-2">
                    <div class="overflow-x-auto">
                        <table class="items-center w-full mb-0 align-top border-gray-200 text-slate-500" id="fb_posts">
                            <thead class="align-bottom">
                            <tr>
                                <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                    Created by
                                </th>
                                <th class="px-6 py-3 font-bold tracking-normal text-left uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                    Post
                                </th>
                                <th class="px-6 py-3 pl-2 font-bold tracking-normal text-left uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                    Images
                                </th>
                                <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                    Status
                                </th>

                                <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                    Created at
                                </th>
                                <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                    Published At
                                </th>
                                <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                    pages
                                </th>
                                <!--                                                        <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">Details</th>-->
                            </tr>
                            </thead>
                            <tbody>
                            <form method="get">
                                <div class="flex items-center">
                                    <input
                                        type="text" name="search" value="{{ search_query }}" placeholder="Search..." class="border rounded-l text-xs py-2 px-3 w-64"><button type="submit" class="px-3 py-2 text-xs font-bold text-center text-white uppercase align-middle transition-all bg-transparent rounded-lg cursor-pointer leading-pro  ease-soft-in shadow-soft-md bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline">
                                        Search</button>
                                </div>
                            </form>
                            {% for p in facebook_post %}
                            <tr>
                                <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap shadow-transparent">
                                    <div class="flex px-2 py-1">
                                        <div>
                                             {% if p.user.profile_image %}
                                            <img src="{{ p.user.profile_image.url }}"
                                                 class="inline-flex items-center justify-center mr-4 text-sm text-white transition-all duration-200 ease-soft-in-out h-9 w-9 rounded-xl"
                                                 alt="{{p.user}}">
                                            {% else %}
                                            <img src="
                                            {% static 'image/default.png' %}"
                                                 class="inline-flex items-center justify-center mr-4 text-sm text-white transition-all duration-200 ease-soft-in-out h-9 w-9 rounded-xl" alt="{{p.user}}">
                                            {% endif %}

                                        </div>
                                        <div class="flex flex-col justify-center">
                                            <h6 class="mb-0 text-sm leading-normal font-semibold">{{p.user|title}}</h6>
                                            <p class="mb-0 text-xs leading-tight text-slate-400 pt-1">
                                                {{p.user.email}}</p>
                                        </div>
                                    </div>
                                </td>
                                <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap">
                                    <div class="flex px-2 py-1">
                                        <div class="flex flex-col justify-center">

                                            <h6 class="mb-0 text-sm leading-normal">{{p.post|truncatewords:5}}</h6>
                                        </div>
                                    </div>
                                </td>
                                <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap">
                                    <div class="mt-2 avatar-group media-div">
                                        {% if p.images %}
                                        {% for image in p.images.all %}
                                        {% if image.is_mp4_file %}
                                        Video
                                        {% else %}
                                        <a href="javascript:;"
                                           class="photos relative z-20 inline-flex items-center justify-center w-8 h-8 text-white transition-all duration-200 border-2 border-white border-solid rounded-full ease-soft-in-out text-xs hover:z-30"
                                           data-target="tooltip_trigger" data-placement="bottom">
                                            <img src="{{image.image.url}}" class="w-full rounded-full" alt="team1"/>
                                        </a>
                                        <div data-target="tooltip"
                                             class="hidden px-2 py-1 text-white bg-black rounded-lg text-sm"
                                             role="tooltip">
                                            {{image.image}}
                                            <div class="invisible absolute h-2 w-2 bg-inherit before:visible before:absolute before:h-2 before:w-2 before:rotate-45 before:bg-inherit before:content-['']"
                                                 data-popper-arrow></div>
                                        </div>

                                        {% endif %}
                                        {% endfor %}
                                        {% endif %}

                                    </div>
                                </td>

                                {% if p.status == 'PROCESSING' %}
                                <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                    <span class="bg-gradient-to-tl from-blue-700 to-gray-400 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                                </td>
                                {% elif p.status == 'DRAFT' %}
                                <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                    <span class="bg-gradient-to-tl from-red-700 to-yellow-400 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                                </td>
                                {% elif p.status == 'SCHEDULED' %}
                                <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                    <span class="bg-gradient-to-tl from-purple-700 to-blue-800 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                                </td>
                                {% else %}
                                <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                    <span class="bg-gradient-to-tl from-green-500 to-green-900 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                                </td>
                                {% endif %}


                                <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap shadow-transparent">
                                    <div class="flex px-4 py-1">

                                        <div class="flex flex-col justify-center items-center w-full">

                                            <h6 class="mb-0 text-sm leading-normal">{{p.created_at|naturaltime}}</h6>

                                        </div>
                                    </div>
                                </td>

                                <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                    <div class="flex px-4 py-1">

                                        <div class="flex flex-col justify-center items-center w-full">
                                            {% if p.status == 'SCHEDULED' %}
                                            <h6 class="mb-0 text-sm leading-normal">{{p.schedule_datetime|naturaltime}}</h6>
                                            {% else %}
                                            <h6 class="mb-0 text-sm leading-normal">{{p.published_at|naturaltime}}</h6>
                                            {% endif %}
                                        </div>
                                    </div>
                                </td>
                                <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                    <div class="flex px-2 py-1">
                                        {% if p.status == 'PUBLISHED' %}
                                        <div class="flex flex-col justify-center">
                                            {% for page_name in p.post_urn.all %}
                                            {%if page_name.org.provider == 'facebook' %}
                                            <a href="{%url 'my_detail_posts' p.pk page_name.pk%}?page_name={{ page_name.org.provider }}">
                                                <h6 class="mb-0 text-sm font-bold leading-normal">{{page_name.org}}</h6>

                                            </a>
                                            {%endif%}
                                            {%endfor%}

                                        </div>
                                        {% elif p.status == 'DRAFT' %}
                                        <div class="flex flex-col justify-center">
                                            <a href="{%url 'post_draft' p.pk %}">
                                                <h6 class="bg-gradient-to-tl from-red-700 to-yellow-800 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">PUBLISH THIS DRAFT</h6>
                                            </a>
                                        </div>
                                        {% else %}
                                        <div class="flex flex-col justify-center">
                                            {% for page_name in p.prepost_page.all %}
                                            {%if page_name.provider == 'facebook' %}
                                            <h6 class="mb-0 text-sm leading-normal">{{page_name.name}}</h6>
                                            {%endif%}
                                            {%endfor%}

                                        </div>
                                        {% endif %}
                                    </div>
                                </td>
                            </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        <div class="pagination flex items-center justify-between p-4">
                            <div >
                                {% if facebook_post.has_previous %}
                                    <a href="?platform=fb&page=1" data-page="1" class="pagination-link mr-4" onclick="updatePage(event,'fb')">&laquo; First</a>
                                    <a href="?platform=fb&page={{ facebook_post.previous_page_number }}" data-page="{{ facebook_post.previous_page_number }}" class="pagination-link mr-2" onclick="updatePage(event,'fb')">Previous</a>
                                {% endif %}
                            </div>

                            <span class="current-page">Page {{ facebook_post.number }} of {{ facebook_post.paginator.num_pages }}</span>

                            <div ">
                                {% if facebook_post.has_next %}
                                    <a href="?platform=fb&page={{ facebook_post.next_page_number }}"  data-page="{{ facebook_post.next_page_number }}" class="pagination-link ml-2" onclick="updatePage(event,'fb')">Next</a>
                                    <a href="?platform=fb&page={{ facebook_post.paginator.num_pages }}" data-page="{{ facebook_post.paginator.num_pages }}" class="pagination-link ml-4" onclick="updatePage(event,'fb')">Last &raquo;</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab2" class="tab hidden">

            <div class="flex-auto p-6 px-0 pb-2">
                <div class="overflow-x-auto">
                    <table class="items-center w-full mb-0 align-top border-gray-200 text-slate-500">
                        <thead class="align-bottom">
                        <tr>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Created by
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-left uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Post
                            </th>
                            <th class="px-6 py-3 pl-2 font-bold tracking-normal text-left uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Images
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Status
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                created at
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Published At
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                pages
                            </th>
                            <!--                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">Details</th>-->
                            <!--                            </tr>-->
                        </thead>
                        <tbody>
                        <form method="get">
                                <div class="flex items-center">
                                    <input
                                        type="text" name="search" value="{{ search_query }}" placeholder="Search..." class="border rounded-l text-xs py-2 px-3 w-64"><button type="submit" class="px-3 py-2 text-xs font-bold text-center text-white uppercase align-middle transition-all bg-transparent rounded-lg cursor-pointer leading-pro  ease-soft-in shadow-soft-md bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline">
                                        Search</button>
                                </div>
                        </form>
                        {% for p in linkedin_post %}
                        <tr>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap shadow-transparent">
                                <div class="flex px-2 py-1">
                                    <div>
                                         {% if p.user.profile_image %}
                                            <img src="{{ p.user.profile_image.url }}"
                                                 class="inline-flex items-center justify-center mr-4 text-sm text-white transition-all duration-200 ease-soft-in-out h-9 w-9 rounded-xl"
                                                 alt="{{p.user}}">
                                            {% else %}
                                            <img src="
                                            {% static 'image/default.png' %}"
                                                 class="inline-flex items-center justify-center mr-4 text-sm text-white transition-all duration-200 ease-soft-in-out h-9 w-9 rounded-xl" alt="{{p.user}}">
                                        {% endif %}
                                    </div>
                                    <div class="flex flex-col justify-center">
                                        <h6 class="mb-0 text-sm leading-normal font-semibold">{{p.user|title}}</h6>
                                        <p class="mb-0 text-xs leading-tight text-slate-400 pt-1">{{p.user.email}}</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap">
                                <div class="flex px-2 py-1">
                                    <div class="flex flex-col justify-center">

                                        <h6 class="mb-0 text-sm leading-normal">{{p.post|truncatewords:5}}</h6>

                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap">
                                <div class="mt-2 avatar-group media-div">
                                    {% if p.images %}
                                    {% for image in p.images.all %}
                                    {% if image.is_mp4_file %}
                                    Video
                                    {% else %}
                                    <a href="javascript:;"
                                       class="photos relative z-20 inline-flex items-center justify-center w-8 h-8 text-white transition-all duration-200 border-2 border-white border-solid rounded-full ease-soft-in-out text-xs hover:z-30"
                                       data-target="tooltip_trigger" data-placement="bottom">
                                        <img src="{{image.image.url}}" class="w-full rounded-full" alt="team1"/>
                                    </a>
                                    <div data-target="tooltip"
                                         class="hidden px-2 py-1 text-white bg-black rounded-lg text-sm" role="tooltip">
                                        {{image.image}}
                                        <div class="invisible absolute h-2 w-2 bg-inherit before:visible before:absolute before:h-2 before:w-2 before:rotate-45 before:bg-inherit before:content-['']"
                                             data-popper-arrow></div>
                                    </div>

                                    {% endif %}
                                    {% endfor %}
                                    {% endif %}

                                </div>
                            </td>
                            {% if p.status == 'PROCESSING' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-blue-700 to-gray-400 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% elif p.status == 'DRAFT' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-red-700 to-yellow-400 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% elif p.status == 'SCHEDULED' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-purple-700 to-blue-800 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% else %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-green-500 to-green-900 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% endif %}
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                <div class="flex px-4 py-1">

                                    <div class="flex flex-col justify-center items-center w-full">
                                        <h6 class="mb-0 text-sm leading-normal">{{p.created_at|naturaltime}}</h6>
                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                <div class="flex px-4 py-1">

                                    <div class="flex flex-col justify-center items-center w-full">
                                        {% if p.status == 'SCHEDULED' %}
                                        <h6 class="mb-0 text-sm leading-normal">{{p.schedule_datetime|naturaltime}}</h6>
                                        {% else %}
                                        <h6 class="mb-0 text-sm leading-normal">{{p.published_at|naturaltime}}</h6>
                                        {% endif %}
                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                <div class="flex px-2 py-1">
                                    {% if p.status == 'PUBLISHED' %}
                                    <div class="flex flex-col justify-center">
                                        {% for page_name in p.post_urn.all %}
                                        {%if page_name.org.provider == 'linkedin'%}
                                        <a href="{%url 'my_detail_posts' p.pk page_name.pk%}?page_name={{ page_name.org.provider }}">
                                            <h6 class="mb-0 text-sm font-bold leading-normal">{{page_name.org}}</h6>

                                        </a>
                                        {%endif%}
                                        {%endfor%}

                                    </div>
                                    {% elif p.status == 'DRAFT' %}
                                    <div class="flex flex-col justify-center">
                                        <a href="{%url 'post_draft' p.pk %}">
                                            <h6 class="bg-gradient-to-tl from-red-700 to-yellow-800 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">PUBLISH THIS DRAFT</h6>
                                        </a>
                                    </div>
                                    {% else %}
                                    <div class="flex flex-col justify-center">
                                        {% for page_name in p.prepost_page.all %}
                                        {%if page_name.provider == 'linkedin'%}
                                        <h6 class="mb-0 text-sm leading-normal">{{page_name.name}}</h6>
                                        {%endif%}
                                        {%endfor%}

                                    </div>
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="pagination flex items-center justify-between p-4">
                            <div class="flex items-center">
                                {% if linkedin_post.has_previous %}
                                    <a href="?platform=ln&page=1" class="pagination-link mr-4" data-page="1" onclick="updatePage(event,'ln')">&laquo; First</a>
                                    <a href="?platform=ln&page={{ linkedin_post.previous_page_number }}" data-page="{{ linkedin_post.previous_page_number }}" class="pagination-link mr-2" onclick="updatePage(event,'ln')">Previous</a>
                                {% endif %}
                            </div>

                            <span class="current-page">Page {{ linkedin_post.number }} of {{ linkedin_post.paginator.num_pages }}</span>

                            <div class="flex items-center">
                                {% if linkedin_post.has_next %}
                                    <a href="?platform=ln&page={{ linkedin_post.next_page_number }}" data-page="{{ linkedin_post.next_page_number }}" class="pagination-link ml-2" onclick="updatePage(event,'ln')">Next</a>
                                    <a href="?platform=ln&page={{ linkedin_post.paginator.num_pages }}" data-page="{{ linkedin_post.paginator.num_pages }}" class="pagination-link ml-4" onclick="updatePage(event,'ln')">Last &raquo;</a>
                                {% endif %}
                            </div>
                    </div>
                </div>
            </div>

            <!-- Content for Tab 2 goes here -->
        </div>

        <div id="tab3" class="tab hidden">

            <div class="flex-auto p-6 px-0 pb-2">
                <div class="overflow-x-auto">
                    <table class="items-center w-full mb-0 align-top border-gray-200 text-slate-500">
                        <thead class="align-bottom">

                        <tr>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Created by
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-left uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Post
                            </th>
                            <th class="px-6 py-3 pl-2 font-bold tracking-normal text-left uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Images
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Status
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Created at
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Published At
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                pages
                            </th>
                            <!--                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">Details</th></tr>-->

                        </thead>
                        <tbody>
                        <form method="get">
                                <div class="flex items-center">
                                    <input
                                        type="text" name="search" value="{{ search_query }}" placeholder="Search..." class="border rounded-l text-xs py-2 px-3 w-64"><button type="submit" class="px-3 py-2 text-xs font-bold text-center text-white uppercase align-middle transition-all bg-transparent rounded-lg cursor-pointer leading-pro  ease-soft-in shadow-soft-md bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline">
                                        Search</button>
                                </div>
                        </form>
                        {% for p in instagram_post %}
                        <tr>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap shadow-transparent">
                                <div class="flex px-2 py-1">
                                    <div>
                                         {% if p.user.profile_image %}
                                            <img src="{{ p.user.profile_image.url }}"
                                                 class="inline-flex items-center justify-center mr-4 text-sm text-white transition-all duration-200 ease-soft-in-out h-9 w-9 rounded-xl"
                                                 alt="{{p.user}}">
                                        {% else %}
                                        <img src="
                                            {% static 'image/default.png' %}"
                                                 class="inline-flex items-center justify-center mr-4 text-sm text-white transition-all duration-200 ease-soft-in-out h-9 w-9 rounded-xl" alt="{{p.user}}">
                                        {% endif %}

                                        </div>
                                    <div class="flex flex-col justify-center">
                                        <h6 class="mb-0 text-sm leading-normal font-semibold">{{p.user|title}}</h6>
                                        <p class="mb-0 text-xs leading-tight text-slate-400 pt-1">{{p.user.email}}</p>
                                    </div>
                                </div>
                            </td>

                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap">
                                <div class="flex px-2 py-1">
                                    <div class="flex flex-col justify-center">
                                        <a href="#">
                                            <h6 class="mb-0 text-sm leading-normal">{{p.post|truncatewords:5}}</h6>
                                        </a>
                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap">
                                <div class="mt-2 avatar-group media-div">
                                    {% if p.images %}
                                    {% for image in p.images.all %}
                                    {% if image.is_mp4_file %}
                                    Video
                                    {% else %}
                                    <a href="javascript:;"
                                       class="photos relative z-20 inline-flex items-center justify-center w-8 h-8 text-white transition-all duration-200 border-2 border-white border-solid rounded-full ease-soft-in-out text-xs hover:z-30 rotate-180"
                                       data-target="tooltip_trigger" data-placement="bottom">
                                        <img src="{{image.image.url}}" class="w-full rounded-full" alt="team1"/>
                                    </a>
                                    <div data-target="tooltip"
                                         class="hidden px-2 py-1 text-white bg-black rounded-lg text-sm" role="tooltip">
                                        {{image.image}}
                                        <div class="invisible absolute h-2 w-2 bg-inherit before:visible before:absolute before:h-2 before:w-2 before:rotate-45 before:bg-inherit before:content-['']"
                                             data-popper-arrow></div>
                                    </div>

                                    {% endif %}
                                    {% endfor %}
                                    {% endif %}

                                </div>
                            </td>
                            {% if p.status == 'PROCESSING' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-blue-700 to-gray-400 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% elif p.status == 'DRAFT' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-red-700 to-yellow-400 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% elif p.status == 'SCHEDULED' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-purple-700 to-blue-800 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% else %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-green-500 to-green-900 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% endif %}
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                <div class="flex px-4 py-1">

                                    <div class="flex flex-col justify-center items-center w-full">
                                        <h6 class="mb-0 text-sm leading-normal">{{p.created_at|naturaltime}}</h6>
                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                <div class="flex px-4 py-1">

                                    <div class="flex flex-col justify-center items-center w-full">
                                        {% if p.status == 'SCHEDULED' %}
                                        <h6 class="mb-0 text-sm leading-normal">{{p.schedule_datetime|naturaltime}}</h6>
                                        {% else %}
                                        <h6 class="mb-0 text-sm leading-normal">{{p.published_at|naturaltime}}</h6>
                                        {% endif %}
                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                <div class="flex px-2 py-1">
                                    {% if p.status == 'PUBLISHED' %}
                                    <div class="flex flex-col justify-center">
                                        {% for page_name in p.post_urn.all %}
                                        {%if page_name.org.provider == 'instagram'%}
                                        <a href="{%url 'my_detail_posts' p.pk page_name.pk%}?page_name={{ page_name.org.provider }}">
                                            <h6 class="mb-0 text-sm font-bold leading-normal">{{page_name.org}}</h6>

                                        </a>
                                        {%endif%}
                                        {%endfor%}

                                    </div>
                                    {% elif p.status == 'DRAFT' %}
                                    <div class="flex flex-col justify-center">
                                        <a href="{%url 'post_draft' p.pk %}">
                                            <h6 class="bg-gradient-to-tl from-red-700 to-yellow-800 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">PUBLISH THIS DRAFT</h6>
                                        </a>
                                    </div>
                                    {% else %}
                                    <div class="flex flex-col justify-center">
                                        {% for page_name in p.prepost_page.all %}
                                        {%if page_name.provider == 'instagram'%}
                                        <h6 class="mb-0 text-sm leading-normal">{{page_name.name}}</h6>
                                        {%endif%}
                                        {%endfor%}

                                    </div>
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="pagination flex items-center justify-between p-4">
                            <div class="flex items-center">
                                {% if instagram_post.has_previous %}
                                    <a href="?platform=insta&page=1" class="pagination-link mr-4" data-page="1" onclick="updatePage(event,'insta')">&laquo; First</a>
                                    <a href="?platform=insta&page={{ instagram_post.previous_page_number }}" data-page="{{ instagram_post.previous_page_number }}" class="pagination-link mr-2" onclick="updatePage(event,'insta')">Previous</a>
                                {% endif %}
                            </div>

                            <span class="current-page">Page {{ instagram_post.number }} of {{ instagram_post.paginator.num_pages }}</span>

                            <div class="flex items-center">
                                {% if instagram_post.has_next %}
                                    <a href="?platform=insta&page={{ instagram_post.next_page_number }}" data-page="{{ instagram_post.next_page_number }}" class="pagination-link ml-2" onclick="updatePage(event,'insta')">Next</a>
                                    <a href="?platform=insta&page={{ instagram_post.paginator.num_pages }}" data-page="{{ instagram_post.paginator.num_pages }}" class="pagination-link ml-4" onclick="updatePage(event,'insta')">Last &raquo;</a>
                                {% endif %}
                            </div>
                    </div>
                </div>
            </div>
            <!-- Content for Tab 3 goes here -->
        </div>

        <div id="tab4" class="tab hidden">

            <div class="flex-auto p-6 px-0 pb-2">
                <div class="overflow-x-auto">
                    <table class="items-center w-full mb-0 align-top border-gray-200 text-slate-500">
                        <thead class="align-bottom">

                        <tr>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Created by
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-left uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Post
                            </th>
                            <th class="px-6 py-3 pl-2 font-bold tracking-normal text-left uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Images
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Status
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                created at
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                Published At
                            </th>
                            <th class="px-6 py-3 font-bold tracking-normal text-center uppercase align-middle bg-transparent border-b letter border-b-solid text-xxs whitespace-nowrap border-b-gray-200 text-slate-400 opacity-70">
                                pages
                            </th>
                        </tr>

                        </thead>
                        <tbody>
                        <form method="get">
                                <div class="flex items-center">
                                    <input
                                        type="text" name="search" value="{{ search_query }}" placeholder="Search..." class="border rounded-l text-xs py-2 px-3 w-64"><button type="submit" class="px-3 py-2 text-xs font-bold text-center text-white uppercase align-middle transition-all bg-transparent rounded-lg cursor-pointer leading-pro  ease-soft-in shadow-soft-md bg-150 bg-gradient-to-tl from-gray-900 to-slate-800 hover:shadow-soft-xs active:opacity-85 hover:scale-102 tracking-tight-soft bg-x-25 no-underline hover:no-underline">
                                        Search</button>
                                </div>
                        </form>
                        {% for p in google_post %}
                        <tr>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap shadow-transparent">
                                <div class="flex px-2 py-1">
                                    <div>
                                         {% if p.user.profile_image %}
                                            <img src="{{ p.user.profile_image.url }}"
                                                 class="inline-flex items-center justify-center mr-4 text-sm text-white transition-all duration-200 ease-soft-in-out h-9 w-9 rounded-xl"
                                                 alt="{{p.user}}">
                                        {% else %}
                                            <img src="
                                            {% static 'image/default.png' %}"
                                                 class="inline-flex items-center justify-center mr-4 text-sm text-white transition-all duration-200 ease-soft-in-out h-9 w-9 rounded-xl" alt="{{p.user}}">
                                        {% endif %}

                                        </div>
                                    <div class="flex flex-col justify-center">
                                        <h6 class="mb-0 text-sm leading-normal font-semibold">{{p.user|title}}</h6>
                                        <p class="mb-0 text-xs leading-tight text-slate-400 pt-1">{{p.user.email}}</p>
                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap">
                                <div class="flex px-2 py-1">
                                    <div class="flex flex-col justify-center">
                                        <h6 class="mb-0 text-sm leading-normal">{{p.post|truncatewords:5}}</h6>
                                    </div>
                                </div>
                            </td>


                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap">
                                <div class="mt-2 avatar-group media-div">
                                    {% if p.images %}
                                    {% for image in p.images.all %}
                                    {% if image.is_mp4_file %}
                                    Video
                                    {% else %}
                                    <a href="javascript:;"
                                       class="photos relative z-20 inline-flex items-center justify-center w-8 h-8 text-white transition-all duration-200 border-2 border-white border-solid rounded-full ease-soft-in-out text-xs hover:z-30"
                                       data-target="tooltip_trigger" data-placement="bottom">
                                        <img src="{{image.image.url}}" class="w-full rounded-full" alt="team1"/>
                                    </a>
                                    <div data-target="tooltip"
                                         class="hidden px-2 py-1 text-white bg-black rounded-lg text-sm" role="tooltip">
                                        {{image.image}}
                                        <div class="invisible absolute h-2 w-2 bg-inherit before:visible before:absolute before:h-2 before:w-2 before:rotate-45 before:bg-inherit before:content-['']"
                                             data-popper-arrow></div>
                                    </div>

                                    {% endif %}
                                    {% endfor %}
                                    {% endif %}

                                </div>
                            </td>
                            </td>

                            {% if p.status == 'PROCESSING' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-blue-700 to-gray-400 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% elif p.status == 'DRAFT' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-red-700 to-yellow-400 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% elif p.status == 'SCHEDULED' %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-purple-700 to-blue-800 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% else %}
                            <td class="p-2 text-sm leading-normal text-center align-middle bg-transparent border-b whitespace-nowrap">
                                <span class="bg-gradient-to-tl from-green-500 to-green-900 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">{{p.status}}</span>

                            </td>
                            {% endif %}

                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap shadow-transparent">
                                <div class="flex px-4 py-1">

                                    <div class="flex flex-col justify-center items-center w-full">

                                        <h6 class="mb-0 text-sm leading-normal">{{p.created_at|naturaltime}}</h6>

                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                <div class="flex px-4 py-1">

                                    <div class="flex flex-col justify-center items-center w-full">
                                        <h6 class="mb-0 text-sm leading-normal">{{p.created_at|naturaltime}}</h6>
                                    </div>
                                </div>
                            </td>
                            <td class="p-2 align-middle bg-transparent border-b whitespace-nowrap justify-center">
                                <div class="flex px-2 py-1">
                                    {% if p.status == 'PUBLISHED' %}
                                    <div class="flex flex-col justify-center">
                                        {% for page_name in p.post_urn.all %}
                                        {%if page_name.org.provider == 'facebook' %}
                                        <a href="{%url 'my_detail_posts' p.pk page_name.pk%}?page_name={{ page_name.org.provider }}">
                                            <h6 class="mb-0 text-sm font-bold leading-normal">{{page_name.org}}</h6>

                                        </a>
                                        {%endif%}
                                        {%endfor%}

                                    </div>
                                    {% elif p.status == 'DRAFT' %}
                                    <div class="flex flex-col justify-center">
                                        <a href="{%url 'post_draft' p.pk %}">
                                            <h6 class="bg-gradient-to-tl from-red-700 to-yellow-800 px-2.5 text-xs rounded-1.8 py-1.4 inline-block whitespace-nowrap text-center align-baseline font-bold uppercase leading-none text-white">PUBLISH THIS DRAFT</h6>
                                        </a>
                                    </div>
                                    {% else %}
                                    <div class="flex flex-col justify-center">
                                        {% for page_name in p.prepost_page.all %}
                                        {%if page_name.provider == 'facebook' %}
                                        <h6 class="mb-0 text-sm leading-normal">{{page_name.name}}</h6>
                                        {%endif%}
                                        {%endfor%}

                                    </div>
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="pagination flex items-center justify-between p-4">
                        <div class="flex items-center">
                            {% if google_post.has_previous %}
                                <a href="?platform=google&page=1" class="pagination-link mr-4" data-page="1" onclick="updatePage(event,'google')">&laquo; First</a>
                                <a href="?platform=google&page={{ google_post.previous_page_number }}" data-page="{{ google_post.previous_page_number }" class="pagination-link mr-2" onclick="updatePage(event,'google')">Previous</a>
                            {% endif %}
                        </div>

                        <span class="current-page">Page {{ google_post.number }} of {{ google_post.paginator.num_pages }}</span>

                        <div class="flex items-center">
                            {% if google_post.has_next %}
                                <a href="?platform=google&page={{ google_post.next_page_number }}" data-page="{{ google_post.next_page_number }}" class="pagination-link ml-2" onclick="updatePage(event,'google')">Next</a>
                                <a href="?platform=google&page={{ google_post.paginator.num_pages }}" data-page="{{ google_post.paginator.num_pages }}"  class="pagination-link ml-4" onclick="updatePage(event,'google')">Last &raquo;</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            <!-- Content for Tab 3 goes here -->
        </div>
    </div>
</div>
</div>

<script src="{% static 'customjs/images.js' %}"></script>
<script>

document.addEventListener("DOMContentLoaded", function() {

  const tabLinks = document.querySelectorAll(".text-gray-500.font-medium.py-2");
  const tabs = document.querySelectorAll(".tab");

  tabLinks.forEach(function(tabLink) {
    tabLink.addEventListener("click", function(e) {


      const targetTab = document.querySelector("#" + this.getAttribute("data-tab"));

      tabs.forEach(function(tab) {
        tab.classList.add("hidden");
      });
      tabLinks.forEach(function(link) {

        link.classList.remove("bg-blue-100","shadow","text-indigo-900");
      });

      targetTab.classList.remove("hidden");

      this.classList.add("bg-blue-100","rounded-full","shadow","text-indigo-900");

    });

  });
});

function setDefaultQueryParams() {
      const platform= 'fb';
      const page= '1';
      const currentUrl = new URL(window.location.href);
      currentUrl.searchParams.set('platform', platform);
      currentUrl.searchParams.set('page', '1');
      window.history.replaceState({}, '', currentUrl.toString());
  }


  document.addEventListener('DOMContentLoaded', setDefaultQueryParams);


function updatePlatform(event,platform) {
    event.preventDefault();
    const currentUrl = window.location.href;
    const url = new URL(currentUrl);


    url.searchParams.set('platform', platform);



    window.history.replaceState({}, '', url);
}


function updatePage(event, platform) {
    event.preventDefault(); // Prevent the default link behavior

    // Access the data-page attribute from the clicked element
    const page = event.target.dataset.page;

    const currentUrl = window.location.href;
    const url = new URL(currentUrl);

    url.searchParams.set('platform', platform);
    url.searchParams.set('page', page);

    window.location.href = url.toString();

    const pk = {{ user.pk }};
    const xhr = new XMLHttpRequest();
    xhr.open("GET", `/posts/${pk}?platform=${platform}&page=${page}`, true);

    xhr.onload = function () {
        if (xhr.status === 200) {
            const response = xhr.responseText;
            // Handle the response if needed
        }
    };

    xhr.send();
}

    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.querySelector('input[name="search"]');
        const searchForm = document.querySelector('form');
        const pk = {{ user.pk }};

        searchForm.addEventListener('submit', function(event) {
            event.preventDefault();
            const searchQuery = searchInput.value;
            console.log(searchQuery);
            const action = `/posts/${pk}?search=${searchQuery}`;
            // Update the form's action attribute and submit the form.
            searchForm.action = action;
            searchForm.submit();
        });

        searchInput.addEventListener('input', function() {
            // Automatically update the form's action attribute with the current input value.
            const searchQuery = searchInput.value;
            if (searchQuery != '') {
                 const action = `/posts/${pk}?search=${searchQuery}`;
                 searchForm.action = action;
            }else{
                const action = `/posts/${pk}`;
                searchForm.action = action;
                searchInput.value = '';
            }

        });
    });







</script>

{% endblock %}
